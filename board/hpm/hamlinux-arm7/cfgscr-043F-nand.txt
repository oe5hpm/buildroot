# setup device-specific environment (MAC-Address, ...)
#setenv ethaddr 00:60:65:01:02:03
#setenv eth1addr 00:60:65:01:02:04

# test for already loaded dtb
fdt addr ${dtbaddr} || exit

echo running HAMRADIO factory settings (NAND, 4.3in screen)

# grow device-tree blob
fdt resize 0x10000

# set NAND on
fdt set gpmc status "okay"

# set lcd panel and controller on
fdt set /panel status "okay"
fdt set ds1ctrl status "okay"

# set display timings for 4.3in display
fdt set ds1timing clock-frequency <14000000>
fdt set ds1timing hactive <480>
fdt set ds1timing vactive <272>
fdt set ds1timing hfront-porch <8>
fdt set ds1timing hback-porch <43>
fdt set ds1timing hsync-len <10>
fdt set ds1timing vfront-porch <4>
fdt set ds1timing vsync-len <10>
fdt set ds1timing hsync-active <0>
fdt set ds1timing vsync-active <0>
fdt set ds1timing pupdelay <10>
fdt set ds1timing pondelay <10>

# set pwm-backlight as backlight driver
fdt get value tmp /panel bkl-tps
fdt set /panel backlight ${tmp}

# do some other specific settings
fdt set fset serial-no "12345"

echo "done"

